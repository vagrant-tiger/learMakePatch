in this patch, I fix some bugs. add one line;
